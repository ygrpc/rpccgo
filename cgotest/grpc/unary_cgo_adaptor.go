// Code generated by protoc-gen-rpc-cgo-adaptor. DO NOT EDIT.
//
// source: unary.proto
// protocols: grpc

package cgotest_grpc

import (
	context "context"
	rpcruntime "github.com/ygrpc/rpccgo/rpcruntime"
)

// TestService adaptor constants.
const (
	TestService_ServiceName         = "cgotest.TestService"
	TestService_Ping_FullMethod     = "/cgotest.TestService/Ping"
	TestService_PingOpt1_FullMethod = "/cgotest.TestService/PingOpt1"
	TestService_PingOpt2_FullMethod = "/cgotest.TestService/PingOpt2"
	TestService_NonFlat_FullMethod  = "/cgotest.TestService/NonFlat"
)

// TestService_lookupHandler selects a protocol and looks up the registered handler.
//
// Selection rules:
// - If ctx explicitly carries a protocol, only that protocol is attempted (no fallback).
// - Otherwise, protocols are tried in the configured order: grpc
func TestService_lookupHandler(ctx context.Context) (rpcruntime.Protocol, any, error) {
	protocol, hasProtocol := rpcruntime.ProtocolFromContext(ctx)
	if hasProtocol && protocol != rpcruntime.ProtocolGrpc {
		return protocol, nil, rpcruntime.ErrUnknownProtocol
	}
	h, ok := rpcruntime.LookupGrpcHandler(TestService_ServiceName)
	if !ok {
		return "", nil, rpcruntime.ErrServiceNotRegistered
	}
	return rpcruntime.ProtocolGrpc, h, nil
}

// TestService_Ping calls cgotest.TestService.Ping via the registered handler.
func TestService_Ping(ctx context.Context, req *PingRequest) (*PingResponse, error) {
	_, h, err := TestService_lookupHandler(ctx)
	if err != nil {
		return nil, err
	}
	svc, ok := h.(TestServiceServer)
	if !ok {
		return nil, rpcruntime.ErrHandlerTypeMismatch
	}
	return svc.Ping(ctx, req)
}

// TestService_PingOpt1 calls cgotest.TestService.PingOpt1 via the registered handler.
func TestService_PingOpt1(ctx context.Context, req *PingRequestOpt1) (*PingResponse, error) {
	_, h, err := TestService_lookupHandler(ctx)
	if err != nil {
		return nil, err
	}
	svc, ok := h.(TestServiceServer)
	if !ok {
		return nil, rpcruntime.ErrHandlerTypeMismatch
	}
	return svc.PingOpt1(ctx, req)
}

// TestService_PingOpt2 calls cgotest.TestService.PingOpt2 via the registered handler.
func TestService_PingOpt2(ctx context.Context, req *PingRequestOpt2) (*PingResponse, error) {
	_, h, err := TestService_lookupHandler(ctx)
	if err != nil {
		return nil, err
	}
	svc, ok := h.(TestServiceServer)
	if !ok {
		return nil, rpcruntime.ErrHandlerTypeMismatch
	}
	return svc.PingOpt2(ctx, req)
}

// TestService_NonFlat calls cgotest.TestService.NonFlat via the registered handler.
func TestService_NonFlat(ctx context.Context, req *NonFlatRequest) (*PingResponse, error) {
	_, h, err := TestService_lookupHandler(ctx)
	if err != nil {
		return nil, err
	}
	svc, ok := h.(TestServiceServer)
	if !ok {
		return nil, rpcruntime.ErrHandlerTypeMismatch
	}
	return svc.NonFlat(ctx, req)
}
